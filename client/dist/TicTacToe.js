var TicTacToe=function(e){var t={};function a(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)a.d(n,l,function(t){return e[t]}.bind(null,l));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=4)}({4:function(e,t,a){var n=a(5).default;e.exports=n},5:function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}a.r(t);var l=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameState=!1,this.gameRoom=t,this._dataClient=a,this.currentPlayer="X",this.gameActive=!0,this.initGameState(),console.log("constructing now"),a.webSocket.send("Message From Client")}var t,a,l;return t=e,(a=[{key:"initGameState",value:function(){var e=this;console.log("init tictactoe"),this.getGameStateWS(),this.loadGameState(this.gameRoom.name).then((function(t){t&&(e.gameState=JSON.parse(t).gameState,console.log(e.gameState),e.updateGrid()),t||(e.gameState={game:["","","","","","","","",""],players:{},turn:e.gameRoom.playerSession},e.saveGameState())}))}},{key:"updateGrid",value:function(){var e=this,t=document.querySelectorAll(".cell");console.log(t),t.forEach((function(t){var a=parseInt(t.getAttribute("data-cell-index"));console.log(e.gameState.game),t.innerHTML=e.gameState.game[a],console.log(a)}))}},{key:"saveGameState",value:function(){return console.log(this.gameRoom),this._dataClient.postGameState(this.gameRoom.name,this.gameState)}},{key:"getGameStateWS",value:function(){var e=this;this._dataClient.webSocket.addEventListener("message",(function(t){e.gameState=JSON.parse(t.data),e.updateGrid()}))}},{key:"sendGameStateWS",value:function(){this._dataClient.webSocket.send(JSON.stringify(this.gameState))}},{key:"loadGameState",value:function(e){return this._dataClient.getGameState(e)}},{key:"handleCellClick",value:function(e){var t=e.target;console.log(this.gameState);var a=parseInt(t.getAttribute("data-cell-index"));""===this.gameState.game[a]&&this.gameActive&&(this.handleGameStateUpdate(t,a),this.handleResult(),console.log(this.gameState))}},{key:"handleGameStateUpdate",value:function(e,t){this.gameState.game[t]=this.currentPlayer,this.saveGameState(),this.sendGameStateWS(),e.innerHTML=this.currentPlayer}},{key:"handlePlayerChange",value:function(){this.currentPlayer="X"===this.currentPlayer?"O":"X"}},{key:"handleResult",value:function(){var e=this,t=!1,a=!this.gameState.game.includes("");[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].forEach((function(a){var n=e.gameState.game[a[0]],l=e.gameState.game[a[1]],i=e.gameState.game[a[2]];n===l&&l===i&&(""===n&&""===l&&""===i||(t=!0))})),t||a?this.gameActive=!1:this.handlePlayerChange()}},{key:"handleRestartGame",value:function(){this.gameActive=!0,this.currentPlayer="X",this.gameState.game=["","","","","","","","",""],document.querySelectorAll(".cell").forEach((function(e){e.innerHTML=""})),this.saveGameState()}},{key:"renderGame",value:function(){document.querySelector("#game--container").innerHTML='\n        <div data-cell-index="0" class="cell"></div>\n        <div data-cell-index="1" class="cell"></div>\n        <div data-cell-index="2" class="cell"></div>\n        <div data-cell-index="3" class="cell"></div>\n        <div data-cell-index="4" class="cell"></div>\n        <div data-cell-index="5" class="cell"></div>\n        <div data-cell-index="6" class="cell"></div>\n        <div data-cell-index="7" class="cell"></div>\n        <div data-cell-index="8" class="cell"></div>\n        <button class="game--restart">Restart Game</button>  \n    ',this.handleClickEvents()}},{key:"handleClickEvents",value:function(){var e=this;document.querySelectorAll(".cell").forEach((function(t){return t.addEventListener("click",(function(t){e.handleCellClick(t)}))})),document.querySelector(".game--restart").addEventListener("click",(function(t){e.handleRestartGame(t)}))}}])&&n(t.prototype,a),l&&n(t,l),e}();t.default=l}});